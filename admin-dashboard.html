<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Narendra Sarees</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body class="admin-body fade-in">
    <div class="admin-container">
        <aside class="admin-sidebar">
            <h1 class="admin-logo">Admin Panel</h1>
            <nav class="admin-nav">
                <a href="#dashboard" class="admin-nav-link active">Dashboard</a>
                <a href="#add-saree" class="admin-nav-link">Add Saree</a>
                <a href="#register-party" class="admin-nav-link">Register New Party</a>
                <a href="#view-parties" class="admin-nav-link">View All Parties</a>
                <a href="#view-orders" class="admin-nav-link">View Orders</a>
                <a href="#" id="logout-btn" class="admin-nav-link">Logout</a>
            </nav>
        </aside>
        <main class="admin-main-content">
            <!-- Dashboard Section -->
            <section id="dashboard" class="admin-section">
                <h2>Dashboard Overview</h2>
                <div class="dashboard-stats">
                    <div class="stat-card"><h3>Total Sarees</h3><p id="total-sarees-stat">0</p></div>
                    <div class="stat-card"><h3>Total Parties</h3><p id="total-parties-stat">0</p></div>
                    <div class="stat-card"><h3>Total Orders</h3><p id="total-orders-stat">0</p></div>
                </div>
                <h3>All Sarees</h3>
                <div class="table-container">
                    <table class="admin-table">
                        <thead><tr><th>Saree Name</th><th>Category</th><th>Price</th><th>Weaver Name</th><th>Date Posted</th><th>Actions</th></tr></thead>
                        <tbody id="all-sarees-table-body"></tbody>
                    </table>
                </div>
            </section>
            
            <!-- Add Saree Section -->
            <section id="add-saree" class="admin-section" style="display:none;">
                <h2>Add New Saree</h2>
                <form id="add-saree-form" class="admin-form">
                    <div class="form-row">
                        <div class="form-group"><label for="sareeName">Saree Name (Title)</label><input type="text" id="sareeName" required></div>
                        <div class="form-group"><label for="sareeCategory">Category</label><input type="text" id="sareeCategory" required></div>
                    </div>
                    <div class="form-row">
                         <div class="form-group"><label for="sareePrice">Price (â‚¹)</label><input type="number" id="sareePrice" required></div>
                        <div class="form-group"><label for="weaverName">Weaver Name (Admin only)</label><input type="text" id="weaverName" required></div>
                    </div>
                    <div class="form-group"><label for="sareeDescription">Description (Optional)</label><textarea id="sareeDescription" rows="4"></textarea></div>
                    
                    <!-- Dynamic Image Links -->
                    <div class="form-group">
                        <label>Image Links</label>
                        <div id="image-links-container">
                            <div class="dynamic-input-row">
                               <input type="url" class="image-link-input" placeholder="https://example.com/image1.jpg" required>
                            </div>
                        </div>
                        <button type="button" id="add-image-link-btn" class="btn-add-more">+ Add Another Image</button>
                    </div>

                    <!-- Dynamic Colors -->
                     <div class="form-group">
                        <label>Available Colors</label>
                        <div id="colors-container">
                             <div class="dynamic-input-row">
                                <input type="text" class="color-input" placeholder="e.g., Royal Blue" required>
                            </div>
                        </div>
                        <button type="button" id="add-color-btn" class="btn-add-more">+ Add Another Color</button>
                    </div>

                    <button type="submit" class="btn">Add Saree to Catalog</button>
                    <p id="add-saree-status" class="form-status-message"></p>
                </form>
            </section>

            <!-- Register Party Section -->
            <section id="register-party" class="admin-section" style="display:none;">
                <h2>Register a New Wholesale Party</h2>
                <form id="register-party-form" class="admin-form">
                    <div class="form-row">
                        <div class="form-group"><label for="partyName">Party Name</label><input type="text" id="partyName" required></div>
                        <div class="form-group"><label for="partyEmail">Party Email</label><input type="email" id="partyEmail" required></div>
                    </div>
                    <div class="form-group"><label for="partyAddress">Address</label><textarea id="partyAddress" rows="3" required></textarea></div>
                    <div class="form-row">
                        <div class="form-group"><label for="partyGst">GST Number</label><input type="text" id="partyGst" required></div>
                        <div class="form-group"><label for="partyPassword">Set Password</label><input type="password" id="partyPassword" required></div>
                    </div>
                    <button type="submit" class="btn">Register Party</button>
                    <p id="register-party-status" class="form-status-message"></p>
                </form>
            </section>
            
            <!-- View Parties Section -->
            <section id="view-parties" class="admin-section" style="display:none;">
                <h2>All Registered Parties</h2>
                <div class="table-container">
                    <table class="admin-table">
                        <thead><tr><th>Party Name</th><th>Email</th><th>GST Number</th><th>Address</th></tr></thead>
                        <tbody id="all-parties-table-body"></tbody>
                    </table>
                </div>
            </section>
            
            <!-- View Orders Section -->
            <section id="view-orders" class="admin-section" style="display:none;">
                <h2>All Submitted Orders</h2>
                <div class="table-container">
                     <button id="export-csv-btn" class="btn">Export as CSV</button>
                    <table class="admin-table">
                        <thead><tr><th>Order ID</th><th>Party Name</th><th>GST</th><th>Address</th><th>Items</th><th>Grand Total</th><th>Date</th></tr></thead>
                        <tbody id="admin-orders-table-body"></tbody>
                    </table>
                </div>
            </section>

        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script type="module" src="script.js"></script>
</body>
</html>
